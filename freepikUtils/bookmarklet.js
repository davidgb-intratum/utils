javascript:(function(){if(!window.location.hostname.endsWith(".freepik.es")){alert('Este script solo funciona en "freepik.es"');return}window.downloadSource=function(e){const t=document.querySelector('[class*="relative"][class*="mx-auto"][class*="max-w-full"][class*="overflow-hidden"][class*="sm:rounded-xl"][class*="transition-all"][class*="max-h-[--detail-preview-max-height-mobile]"][class*="xs:max-h-[--detail-preview-max-height]"]'),n=document.querySelector('[class*="relative"][class*="mx-auto"][class*="transition-all"][class*="aspect-video"][class*="min-h-full"][class*="max-w-full"][class*="self-center"][class*="overflow-hidden"][class*="rounded-none"][class*="object-contain"][class*="sm:rounded-none"][class*="lg:max-h-[calc(100vh-340px)]"]'),o=document.querySelector('[class*="flex"][class*="items-center"][class*="justify-center"][class*="relative"][class*="px-7"][class*="py-24"][class*="bg-white"][class*="lg:rounded-xl"][class*="lg:border"][class*="lg:border-solid"][class*="lg:border-surface-border-1"][class*="order-1"]'),r={url:null,from:null,element:null};if(t){const e=t.querySelector(":scope > img").getAttribute("srcset").split(",").map(e=>e.trim()).find(e=>e.endsWith("1380w"))?.split(" ")[0];r.url=e,r.from="img",r.element=t.querySelector(":scope > img").cloneNode(!0)}else if(n){const e=n.querySelector(":scope > video source");r.url=e.src,r.from="video";const t=document.createElement("video");t.src=e.src,t.controls=!0,t.style.maxWidth="100%",r.element=t}else if(o){const e=o.querySelector(":scope > img");r.url=e.src,r.from="icon",r.element=e.cloneNode(!0)}const i=new URL(r.url),a=i.toString(),l=document.getElementById("custom-image-popup");l&&l.remove();const d=Object.assign(document.createElement("div"),{id:"custom-image-popup",style:"position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:white;padding:1rem;z-index:2147483647;box-shadow:0 0 20px rgba(0,0,0,0.3);border-radius:8px;max-width:90vw;max-height:90vh;overflow:auto;font-family:sans-serif;"}),s=Object.assign(document.createElement("button"),{textContent:"Ã—",style:"position:absolute;top:5px;right:10px;background:transparent;border:none;font-size:1.5rem;cursor:pointer;"});s.onclick=()=>d.remove(),d.appendChild(s),"img"===r.from&&(()=>{const e=Object.assign(document.createElement("input"),{type:"number",value:"1380",min:"1",style:"padding:0.3rem 0.5rem;font-size:1rem;width:80px;border:1px solid #ccc;border-radius:4px;"}),t=Object.assign(document.createElement("button"),{textContent:"Actualizar",style:"margin-left:0.5rem;padding:0.3rem 0.8rem;font-size:1rem;background-color:#3498db;color:white;border:none;border-radius:4px;cursor:pointer;"}),n=Object.assign(document.createElement("div"),{textContent:"Imagen actual.",style:"margin-top:0.5rem;font-size:0.9rem;color:#666;"});t.onclick=()=>{const t=e.value;i.searchParams.set("w",t);const o=i.toString();r.element&&r.element.parentNode&&r.element.parentNode.removeChild(r.element);const a=document.createElement("img");a.src=o,a.style.display="block",a.style.marginTop="1rem",a.style.maxWidth="100%",a.style.border="1px solid #ddd",a.style.borderRadius="4px",r.element=a,d.appendChild(a),n.textContent=o===a?"Imagen original.":"URL actualizada a ancho = "+t},d.appendChild(e),d.appendChild(t),d.appendChild(n)})(),r.element.style.display="block",r.element.style.marginTop="1rem",r.element.style.maxWidth="100%",r.element.style.border="1px solid #ddd",r.element.style.borderRadius="4px",d.appendChild(r.element),t&&t.appendChild(d),n&&n.appendChild(d),o&&o.appendChild(d)};function addCustomUtilities(e){const t=document.querySelector('div[class*="-mb-3"][class*="min-h-10"][class*="xs:mb-0"] div[class*="flex"][class*="justify-end"]');if(!t)return void setTimeout(()=>addCustomUtilities(e),500);const n=document.createElement("button");n.type="button",n.className="flex size-10 items-center justify-center leading-normal hover:text-surface-foreground-1 text-surface-foreground-3 hidden md:flex",n.setAttribute("data-cy","add-to-collection-button"),n.setAttribute("data-state","closed");const o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("fill","#000000"),o.setAttribute("width","16"),o.setAttribute("height","16"),o.setAttribute("viewBox","0 0 24 24"),o.setAttribute("xmlns","http://www.w3.org/2000/svg"),o.setAttribute("class","icon glyph");const r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("d","M18,11.74a1,1,0,0,0-.52-.63L14.09,9.43,15,3.14a1,1,0,0,0-1.78-.75l-7,9a1,1,0,0,0-.17.87,1,1,0,0,0,.59.67l4.27,1.71L10,20.86a1,1,0,0,0,.63,1.07A.92.92,0,0,0,11,22a1,1,0,0,0,.83-.45l6-9A1,1,0,0,0,18,11.74Z"),o.appendChild(r);const i=document.createElement("span");i.className="_1uvu8nb0",i.textContent="Guardar en colecciones",n.appendChild(o),n.appendChild(i),n.addEventListener("click",()=>{downloadSource(e)}),t.insertBefore(n,t.firstChild)}let currentObserver=null;function initObserver(){const e=document.querySelector('main[class*="max-w-[100vw]"][class*="flex-1"]');if(!e)return void setTimeout(()=>initObserver(),100);currentObserver&&currentObserver.disconnect();const t=new MutationObserver(t=>{t.filter(({target:e})=>["_btqskg3 $px-0 lg:$px-70 $mx-auto $relative $h-full $mt-20 $max-w-[2060px] w-full","_btqskg3 $px-0 lg:$px-70 $mx-auto $relative $h-full $mt-20 $w-[1400px] $max-w-[100vw] xl:$max-w-full"].includes(e.className)).forEach(({target:e})=>addCustomUtilities(e))});t.observe(e,{childList:!0,subtree:!0,attributes:!0,characterData:!0}),currentObserver=t}function hookNavigation(e){const t=history.pushState,n=history.replaceState;function o(){setTimeout(e,250)}history.pushState=function(){t.apply(history,arguments),o()},history.replaceState=function(){n.apply(history,arguments),o()},window.addEventListener("popstate",o)}hookNavigation(initObserver),initObserver(),alert("Running FreePik Utils!")})();
